<link
  rel="stylesheet"
  href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
  integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
  crossorigin="anonymous"
/>
<style>
  @import url("https://fonts.googleapis.com/css?family=Montserrat:400,800");

  * {
    box-sizing: border-box;
  }

  body {
    font-family: "Montserrat", sans-serif;
    background: #f6f5f7;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: -20px 0 50px;
    margin-top: 20px;
  }

  h1 {
    font-weight: bold;
    margin: 0;
  }

  p {
    font-size: 14px;
    font-weight: 100;
    line-height: 20px;
    letter-spacing: 0.5px;
    margin: 20px 0 30px;
  }

  span {
    font-size: 12px;
  }

  a {
    color: #333;
    font-size: 14px;
    text-decoration: none;
    margin: 15px 0;
  }

  .container {
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 14px 28px rgba(0, 0, 0, 0.2), 0 10px 10px rgba(0, 0, 0, 0.2);
    position: relative;
    overflow: hidden;
    width: 768px;
    max-width: 100%;
    min-height: 480px;
  }

  .form-container form {
    background: #fff;
    display: flex;
    flex-direction: column;
    padding: 0 50px;
    height: 100%;
    justify-content: center;
    align-items: center;
    text-align: center;
  }

  .social-container {
    margin: 20px 0;
  }

  .social-container a {
    border: 1px solid #ddd;
    border-radius: 50%;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    margin: 0 5px;
    height: 40px;
    width: 40px;
  }

  .form-container input {
    background: #eee;
    border: none;
    padding: 12px 15px;
    margin: 8px 0;
    width: 100%;
  }

  button {
    border-radius: 20px;
    border: 1px solid #f5f2d0;
    background: #93032e;
    color: #fff;
    font-size: 12px;
    font-weight: bold;
    padding: 12px 45px;
    letter-spacing: 1px;
    text-transform: uppercase;
    transition: transform 80ms ease-in;
  }

  button:active {
    transform: scale(0.95);
  }

  button:focus {
    outline: none;
  }

  button.ghost {
    background: transparent;
    border-color: #fff;
  }

  .buttonMobileLogin {
    visibility: hidden;
  }

  .buttonMobileRegister {
    visibility: hidden;
  }

  .form-container {
    position: absolute;
    top: 0;
    height: 100%;
    transition: all 0.6s ease-in-out;
  }

  .sign-in-container {
    left: 0;
    width: 50%;
    z-index: 2;
  }

  .sign-up-container {
    left: 0;
    width: 50%;
    z-index: 1;
    opacity: 0;
  }

  .overlay-container {
    position: absolute;
    top: 0;
    left: 50%;
    width: 50%;
    height: 100%;
    overflow: hidden;
    transition: transform 0.6s ease-in-out;
    z-index: 100;
  }

  .overlay {
    background: linear-gradient(to right, #689d97, #87cdc4) no-repeat 0 0 /
      cover;
    color: #fff;
    position: relative;
    left: -100%;
    height: 100%;
    width: 200%;
    transform: translateY(0);
    transition: transform 0.6s ease-in-out;
  }

  .overlay-panel {
    position: absolute;
    top: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 0 40px;
    height: 100%;
    width: 50%;
    text-align: center;
    transform: translateY(0);
    transition: transform 0.6s ease-in-out;
  }

  .overlay-right {
    right: 0;
    transform: translateY(0);
  }

  .overlay-left {
    transform: translateY(-20%);
  }

  /* Move signin to right */
  .container.right-panel-active .sign-in-container {
    transform: translateX(100%);
  }

  /* Move overlay to left */
  .container.right-panel-active .overlay-container {
    transform: translateX(-100%);
  }

  /* Bring signup over signin */
  .container.right-panel-active .sign-up-container {
    transform: translateX(100%);
    opacity: 1;
    z-index: 5;
  }

  /* Move overlay back to right */
  .container.right-panel-active .overlay {
    transform: translateX(50%);
  }

  /* Bring back the text to center */
  .container.right-panel-active .overlay-left {
    transform: translateY(0);
  }

  /* Same effect for right */
  .container.right-panel-active .overlay-right {
    transform: translateY(20%);
  }
  
  /* Vertical Movement for Smaller Screens */
  @media (max-width: 800px) {
    .buttonMobileLogin {
      visibility: visible;
    }

    .buttonMobileRegister {
      visibility: visible;
    }
    .sign-in-container,
    .sign-up-container {
      width: 100%;
      left: 0;
    }

    .overlay-container {
      display: none;
    }

    .ghost {
      display: inline-block;
      margin-top: 20px;
      border: 1px solid #93392e;
      color: #93392e;
    }

    .form-container.sign-up-container {
      z-index: 2;
    }

    .container.right-panel-active .sign-in-container {
      transform: translateY(100%);
    }

    .container.right-panel-active .sign-up-container {
      transform: translateY(0);
      opacity: 1;
      z-index: 1;
    }
  }

  .footer {
    margin-top: 25px;
    text-align: center;
  }

  .icons {
    display: flex;
    width: 30px;
    height: 30px;
    letter-spacing: 15px;
    align-items: center;
  }
</style>

<div class="container" id="container">
  <div class="form-container sign-up-container">
    <form class="register-form" action="/register" method="POST">
      <h1>Faça seu cadastro</h1>
      <div class="social-container">
        <a href="#" class="social"><i class="fab fa-google-plus-g"></i></a>
      </div>
      <span>Ou use suas credenciais</span>
      <input type="text" id="name" name="name" required placeholder="Name" />
      <input
        type="email"
        id="email"
        name="email"
        required
        placeholder="Email"
      />
      <input
        type="password"
        id="password"
        name="password"
        required
        placeholder="Senha"
      />
      <button type="submit">Criar uma conta</button>
      <button class="ghost" id="mobileSignIn">
        <a class="buttonMobileLogin" href="#overlay-left">Fazer Login</a>
      </button>
    </form>
  </div>
  <div class="form-container sign-in-container">
    <form class="login-form" action="/login" method="POST" id="login">
      <h1>Fazer seu Login</h1>
      <div class="social-container">
        <a href="#" class="social"><i class="fab fa-google-plus-g"></i></a>
      </div>
      <span>Ou use suas credenciais</span>
      <input
        type="email"
        id="email"
        name="email"
        required
        placeholder="Email"
      />
      <input
        type="password"
        id="password"
        name="password"
        required
        placeholder="Senha"
      />
      <a href="#">Esqueceu sua senha?</a>
      <button type="submit">Entrar</button>
      <button class="ghost" id="mobileSignUp">Fazer cadastro</button>
    </form>
  </div>
  <div class="overlay-container">
    <div class="overlay">
      <div class="overlay-panel overlay-left" id="overlay-left">
        <h1>Bem vindo de volta!</h1>
        <p>Logue com seu e-mail e senha para visualizar suas respostas</p>
        <button class="ghost" id="signIn">Faça Login</button>
      </div>
      <div class="overlay-panel overlay-right" id="overlay-right">
        <h1>Não tem conta?</h1>
        <p>Faça cadastro para responder o formulário</p>
        <button class="ghost" id="signUp">Fazer cadastro</button>
      </div>
    </div>
  </div>
</div>

<div class="footer"></div>

<script>
  //Front-End - Movimentação de um lado para o outro (Login para Cadastro e vice-versa)
  const signUpButton = document.getElementById("signUp");
  const signInButton = document.getElementById("signIn");
  const mobileSignUpButton = document.getElementById("mobileSignUp");
  const mobileSignInButton = document.getElementById("mobileSignIn");
  const container = document.getElementById("container");

  signUpButton.addEventListener("click", () =>
    container.classList.add("right-panel-active")
  );

  signInButton.addEventListener("click", () =>
    container.classList.remove("right-panel-active")
  );

  mobileSignUpButton.addEventListener("click", () =>
    container.classList.add("right-panel-active")
  );

  mobileSignInButton.addEventListener("click", () =>
    container.classList.remove("right-panel-active")
  );

  //Back-End da parte Register
  document.addEventListener("DOMContentLoaded", function () {
    const registerForm = document.querySelector(".register-form");
    registerForm.addEventListener("submit", async function (event) {
      event.preventDefault(); // Impede o envio padrão do formulário

      const formData = new FormData(registerForm);
      const data = Object.fromEntries(formData.entries());

      try {
        const response = await fetch("/register", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        });

        const result = await response.json();

        if (response.status === 201) {
        } else {
          // Exibe a mensagem de erro em caso de falha
          const errorMessage = document.querySelector(".error-message");
          if (!errorMessage) {
            const message = document.createElement("div");
            message.classList.add("error-message");
            message.innerText = result.error;
            registerForm.appendChild(message);
          } else {
            errorMessage.innerText = result.error;
          }
        }
      } catch (error) {
        console.error("Erro ao registrar:", error);
      }
    });
  });

  //Back-End da parte do Login
  //-> Autenticação por firebase
</script>
